<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç≠ CANDY SHOP</title>
    <style>
        :root { --pink: #ffb3d9; --dark-pink: #d63384; --light-pink: #ffe6f2; --violet: #7360f2; }
        body { background: var(--light-pink); font-family: sans-serif; margin: 0; padding-bottom: 50px; }
        .header { background: var(--dark-pink); color: white; padding: 25px; text-align: center; border-radius: 0 0 20px 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 15px; max-width: 800px; margin: auto; }
        .card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid var(--pink); text-align: center; position: relative; }
        .card img { width: 100%; height: 160px; object-fit: cover; }
        .soldout-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 160px; background: rgba(0,0,0,0.5); color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; display: none; }
        .card.soldout .soldout-overlay { display: flex; }
        .card.soldout .price { color: red !important; text-decoration: line-through; }
        .card.soldout .viber-btn { background: #ccc !important; pointer-events: none; }
        .card h3 { font-size: 16px; margin: 10px 0 5px; color: #333; }
        .price { color: var(--dark-pink); font-weight: bold; margin-bottom: 10px; }
        .viber-btn { background: #7360f2; color: white; padding: 8px 15px; border-radius: 10px; text-decoration: none; display: inline-block; font-weight: bold; margin-bottom: 15px; cursor: pointer; width: 85%; }
    </style>
</head>
<body>
    <div class="header"><h1>üç≠ CANDY SHOP</h1></div>
    <div class="grid" id="product-list"></div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyC5tpWXgSS-Allqy8uy-7sdxtJJE6Z2x_4",
        authDomain: "candy-52048.firebaseapp.com",
        projectId: "candy-52048",
        storageBucket: "candy-52048.firebasestorage.app",
        messagingSenderId: "386479185750",
        appId: "1:386479185750:web:6a96e6bcbd14c2550280f7"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const VIBER_LINK = "viber://chat?number=+959768667971";

    onSnapshot(query(collection(db, "products"), orderBy("time", "desc")), (snap) => {
        const list = document.getElementById('product-list');
        list.innerHTML = "";
        snap.forEach(d => {
            const p = d.data();
            list.innerHTML += `
                <div class="card ${p.sold ? 'soldout' : ''}">
                    <div class="soldout-overlay">·ÄÄ·ÄØ·Äî·Ä∫·Äû·ÄΩ·Ä¨·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ</div>
                    <img src="${p.image}">
                    <h3>${p.name}</h3>
                    <p class="price">${p.price} MMK</p>
                    <a href="${VIBER_LINK}" class="viber-btn">üõí ·Äô·Äæ·Ä¨·Äö·Ä∞·Äô·Ää·Ä∫</a>
                </div>`;
        });
    });
</script>
</body>
</html>
